angular.module("MessageCenter",["ngAnimate","template/message-center/message.html","template/message-center/message-center.html"]).factory("MessageService",["$rootScope",function(a){var b={};b.config={disabled:!1,max:3,timeout:3e3};var c=[],d=0;return b.configure=function(a){this.config.disabled=angular.isDefined(a.disabled)?a.disabled:this.config.disabled,this.config.max=angular.isDefined(a.max)?a.max:this.config.max,this.config.timeout=angular.isDefined(a.timeout)?a.timeout:this.config.timeout},b.broadcast=function(e,f){if(this.config.disabled)console.log("Message service disabled for message: "+e);else{d++;var g={classes:[],message:e,id:d,timeout:b.config.timeout};f&&(f.important&&(g.type="important"),f.color&&g.classes.push(f.color),angular.isDefined(f.timeout)&&angular.isNumber(f.timeout)&&(g.timeout=f.timeout)),c.push(g),a.$broadcast("MessageService.broadcast",g)}},b.getHistory=function(){return c},b.clearHistory=function(){c=[],d=0},b}]).directive("messageCenter",["$timeout","MessageService",function(a,b){function c(a,b){var c=a.indexOf(b);return-1!=c&&a.splice(c,1),a}return{restrict:"E",scope:{},templateUrl:"template/message-center/message-center.html",controller:["$scope",function(a){a.removeItem=function(b){b.type?c(a.impMessages,b):c(a.messages,b)}}],link:function(d){function e(b,d){if(0!=b.length){var f=b.shift();d.push(f),console.log("adding message "+f.id),a(function(){c(d,f),b.length>0&&(console.log("about to add"+f.id),a(function(){e(b,d)},300))},f.timeout)}}d.messages=[],d.impMessages=[];var f=[],g=[];d.$on("MessageService.broadcast",function(a,c){var h,i;c.type?(h=g,i=d.impMessages):(h=f,i=d.messages),h.push(c),i.length<b.config.max&&1==h.length?e(h,i):console.log("saved "+c.id+" to queue")})}}}]).directive("message",[function(){return{replace:!0,restrict:"E",templateUrl:"template/message-center/message.html"}}]),angular.module("template/message-center/message-center.html",[]).run(["$templateCache",function(a){a.put("template/message-center/message-center.html",'<span><span class="message-center-important"><message ng-repeat="message in impMessages" class="message-animation"></message></span><span class="message-center-regular"><message ng-repeat="message in messages" class="message-animation"></message></span><span>')}]),angular.module("template/message-center/message.html",[]).run(["$templateCache",function(a){a.put("template/message-center/message.html",'<div class="message-box" ng-class="message.classes"><span class="message">{{message.message}}</span><button type="button" class="close" aria-hidden="true" ng-click="removeItem(message)">&times;</button></div>')}]);